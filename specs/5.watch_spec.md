---
tags: []
---
  

ウォッチ（/phase/watch）— 完全版（簡潔・ブーイング必須ロジック入り）

  

  

  

目的

  

  

- 提示された**役者1（表）／黒子1（裏）**に対し、クラップ（同数） or ブーイング（異なる）を宣言。
- 1ゲーム中に各プレイヤー最低3回のブーイングを満たすよう強制ロジックを適用。

  

  

  

  

  

入口（ハンドオフゲート）

  

  

- 全画面：あなたの番です｜フェーズ：ウォッチ → ［OK］で本画面（秘匿描画開始）

  

  

  

  

  

画面構成

  

  

- ヘッダー：ウォッチ  
    

- 右上：［ボードチェック］（公開情報）／［自分の手札］（モーダル）／［？］

-   
    
- ステータスバー（上部）  
    

- ターン：#12（任意の通し番号）
- あなたのブーイング：X / 3
- 残りウォッチ機会：r
- （必要時）**「このターンはブーイング必須」**チップ表示

-   
    
- メイン：相手の提示  
    

- 役者（表）：例 A♠
- 黒子（裏）：裏1（内容非公開）

-   
    
- アクションバー  
    

- ［クラップ（同数）］（※強制時は無効）
- ［ブーイング（異なる）］

-   
    

  

  

  

  

  

ブーイング必須ロジック

  

  

- 各プレイヤーはゲーム中3回以上ブーイング必須（プレイヤー別にカウント）。
- 判定タイミング：ウォッチ宣言前（本画面表示時に計算）
- 計算式：  
    

- needed = max(0, 3 - booCount[me])
- r = remainingWatchIncludingCurrent[me]（今ターンを含む残りウォッチ回数）
- 強制判定：needed >= r → このターンはブーイング必須

-   
    
- 強制時のUI：  
    

- ステータスバーに**「ブーイング必須」**
- ［クラップ］を無効化（ツールチップ：残り機会的にブーイングが必要です）

-   
    

  

  

  

  

  

操作フロー

  

  

1. 提示（役者表／黒子裏）を確認
2. 宣言  
    

- 強制なし：［クラップ］または［ブーイング］ → 確認モーダル → 確定
- 強制あり：［ブーイング］のみ有効 → 確認モーダル → 確定

4.   
    
5. 確定後の遷移ポップアップ  
    

- クラップ：クラップ！ インターミッションへ → /phase/intermission/gate
- ブーイング：ブーイング！ スポットライトへ → /phase/spotlight/gate

7.   
    

  

  

  

  

  

ボードチェック（共通）

  

  

- タブ：セット／ルミナステージ／ノクスステージ／スコア（公開情報のみ）

  

  

  

自分の手札（モーダル）

  

  

- 自分の手札一覧＋最近あなたから取られたカード（あれば）

  

  

  

  

  

例外・ガード

  

  

- ［クラップ］押下試行（強制時）：無効＋トーストこのターンはブーイングが必要です
- 戻る操作時は秘匿再描画ガードを挟む
- 連打ロック（200–400ms）

  

  

  

  

  

状態（最小）

  

{

  "activePlayer": "nox",

  "phase": "watch",

  "opponentStage": { "actor": "S A", "kuroko": "FACE_DOWN" },

  "booCount": { "lumina": 1, "nox": 2 },

  "remainingWatchIncludingCurrent": { "lumina": 3, "nox": 2 },

  "forcedBoo": true, // derived from needed >= r for the active watcher

  "decision": null,  // "clap" | "boo"

  "nextRoute": null

}

  

  

  

  

受け入れ基準（抜粋）

  

  

- ステータスバーにあなたのブーイング X/3と残り機会 rが表示される
- needed >= r のとき**「ブーイング必須」が表示され、［クラップ］無効化**
- 強制がない場合のみ両ボタン有効
- 確定後はポップアップで遷移先を明示し、ゲート経由で次フェーズへ

  

  

  

  

  

文言（例）

  

  

- ステータス：あなたのブーイング：2 / 3｜残りウォッチ機会：2
- 無効理由：残り機会的にブーイングが必要です
- 遷移：クラップ！ インターミッションへ／ブーイング！ スポットライトへ