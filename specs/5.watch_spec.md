---
tags: []
---
  

ウォッチ（/phase/watch）— 完全版（簡潔・ブーイング不足警告ロジック入り）

  

  

  

目的

  

  

- 提示された**役者1（表）／黒子1（裏）**に対し、クラップ（同数） or ブーイング（異なる）を宣言。
- 1ゲーム中に各プレイヤー最低3回のブーイング達成を目指し、不足見込み時には警告のみを表示する。

  

  

  

  

  

入口（ハンドオフゲート）

  

  

- 全画面：あなたの番です｜フェーズ：ウォッチ → ［OK］で本画面（秘匿描画開始）

  

  

  

  

  

画面構成

  

  

- ヘッダー：ウォッチ  
    

- 右上：［ボードチェック］（公開情報）／［自分の手札］（モーダル）／［？］

-   
    
- ステータスバー（上部）  
    

- ターン：#12（任意の通し番号）
- あなたのブーイング：X / 3
- 残りウォッチ機会：r
- （不足見込み時）**「ブーイング不足注意」**チップ表示（例：残り機会的にブーイングが必要です）

-   
    
- メイン：相手の提示  
    

- 役者（表）：例 A♠
- 黒子（裏）：裏1（内容非公開）

-   
    
- アクションバー  
    

- ［クラップ（同数）］
- ［ブーイング（異なる）］

-   
    

  

  

  

  

  

ブーイング不足警告ロジック

  

  

- 各プレイヤーはゲーム中3回以上のブーイング達成を目標にする（プレイヤー別にカウント）。
- 判定タイミング：ウォッチ宣言前（本画面表示時に計算）
- 計算式：  
    

- needed = max(0, 3 - booCount[me])
- r = remainingWatchIncludingCurrent[me]（今ターンを含む残りウォッチ回数）
- 警告判定：needed >= r → ブーイング不足の警告を表示（選択は自由）

-   
    
- 警告表示時のUI：
    

- ステータスバーに**「ブーイング不足注意」**チップを表示
- 必要に応じて補足説明（例：残り機会的にブーイングが必要です）をチップやモーダルに追記

-   
    

  

  

  

  

  

操作フロー

  

  

1. 提示（役者表／黒子裏）を確認
2. 宣言  
    

- （不足警告があっても）［クラップ］または［ブーイング］ → 確認モーダル → 確定

4.   
    
5. 確定後の遷移ポップアップ  
    

- クラップ：クラップ！ インターミッションへ → /phase/intermission/gate
- ブーイング：ブーイング！ スポットライトへ → /phase/spotlight/gate

7.   
    

  

  

  

  

  

ボードチェック（共通）

  

  

- タブ：セット／プレイヤーAステージ／プレイヤーBステージ／スコア（公開情報のみ）

  

  

  

自分の手札（モーダル）

  

  

- 自分の手札一覧＋最近あなたから取られたカード（あれば）

  

  

  

  

  

例外・ガード

  

  

- 不足警告表示中にクラップを選択した場合は、確認モーダルやトーストで注意文（例：残り機会的にブーイングが必要です）を提示しつつ選択を許可
- 戻る操作時は秘匿再描画ガードを挟む
- 連打ロック（200–400ms）

  

  

  

  

  

状態（最小）

  

{

  "activePlayer": "nox",

  "phase": "watch",

  "opponentStage": { "actor": "S A", "kuroko": "FACE_DOWN" },

  "booCount": { "lumina": 1, "nox": 2 },

  "remainingWatchIncludingCurrent": { "lumina": 3, "nox": 2 },

  "booWarning": true, // derived from needed >= r for the active watcher; trueなら不足警告表示

  "decision": null,  // "clap" | "boo"

  "nextRoute": null

}

  

  

  

  

受け入れ基準（抜粋）

  

  

- ステータスバーにあなたのブーイング X/3と残り機会 rが表示される
- needed >= r のとき**「ブーイング不足注意」**が表示され、警告文を添えても両ボタンは選択可能
- 常に両ボタンを選択可能（不足警告が出ても非活性化しない）
- 確定後はポップアップで遷移先を明示し、ゲート経由で次フェーズへ

  

  

  

  

  

文言（例）

  

  

- ステータス：あなたのブーイング：2 / 3｜残りウォッチ機会：2
- 警告文：残り機会的にブーイングが必要です（クラップ選択時に再掲）
- 遷移：クラップ！ インターミッションへ／ブーイング！ スポットライトへ
